<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video call</title>

    <link rel="stylesheet" href="./src/styles/reset.css" />
    <link rel="stylesheet" href="./src/styles/vars.css" />
    <link rel="stylesheet" href="src/styles/fonts.scss" />
    <link rel="stylesheet" href="src/styles/components.scss" />
    <link rel="stylesheet" href="src/styles/blocks/chat.scss" />
    <link rel="stylesheet" href="src/styles/main.scss" />
  </head>

  <body>
    <div id="root">
      <div class="content">
        <div class="sidebar">
          <a href="/" class="logo">
            <img src="./src/assets/logo.svg" alt="" />
          </a>
          <nav class="nav">
            <ul class="nav-list">
              <li class="nav-list__item">
                <a href="pages/nested/index.html" class="nav-list__link">
                  <img src="./src/assets/icons/home.svg" alt="" />
                </a>
              </li>
              <li class="nav-list__item">
                <a href="/" class="nav-list__link nav-list__link--active">
                  <img src="./src/assets/icons/camera.svg" alt="" />
                </a>
              </li>
              <li class="nav-list__item">
                <a href="pages/settings/index.html" class="nav-list__link">
                  <img src="./src/assets/icons/tool.svg" alt="" />
                </a>
              </li>
            </ul>
          </nav>

          <div class="user-avatar">
            <img src="./src/assets/avatar.png" alt="" />
          </div>
        </div>
        <main class="main">
          <div class="player-section">
            <header class="player-header">
              <div class="player-header__top">
                <button class="button-base">
                  <img src="./src/assets/icons/arrow-left.svg" alt="" />
                </button>
                <h2 class="player-header__title-room">Design Critique - Nickelfox Website</h2>
                <button class="button-base">
                  <img src="./src/assets/icons/users.svg" alt="" />
                  15+
                </button>
              </div>
              <div class="player-header__bottom">
                <div class="player-header__rec"><img src="./src/assets/icons/rec.svg" alt="" />REC 00:12:36</div>
                <div class="player-header__add-user">
                  <button class="button-base"><img src="./src/assets/icons/plus.svg" alt="" /></button>
                  <span>Add user to the call</span>
                </div>
              </div>
            </header>
            <div class="video-container">
              <div class="video-container__content">
                <video id="camera-stream" class="main-video" loop muted>
                  <source src="" />
                </video>
                <div class="participants-list">
                  <div class="participants-list__item">
                    <video id="temp" loop muted>
                      <source src="" />
                    </video>
                    <div class="mic-status mic-status--off participants-list__mic-status">
                      <img src="./src/assets/icons/mic-off.svg" alt="" />
                    </div>
                  </div>

                  <div class="participants-list__item">
                    <video id="temp1" loop muted>
                      <source src="" />
                    </video>
                    <div class="mic-status mic-status--on participants-list__mic-status">
                      <img src="./src/assets/icons/wave.svg" alt="" />
                    </div>
                  </div>
                </div>

                <div class="player-control">
                  <button class="player-control__button" id="share-screen">
                    <img src="./src/assets/icons/share-screen.svg" alt="" />
                  </button>
                  <button class="player-control__button" id="camera-toggle">
                    <img src="./src/assets/icons/camera.svg" alt="" />
                  </button>
                  <button class="player-control__button-cancel">
                    <img src="./src/assets/icons/phone.svg" alt="" />
                  </button>
                  <button class="player-control__button" id="mic-toggle">
                    <img src="./src/assets/icons/mic.svg" alt="" />
                  </button>
                  <button class="player-control__button"><img src="./src/assets/icons/tool.svg" alt="" /></button>
                </div>
              </div>
            </div>
            <div class="transcription">
              <div class="transcription__icon"><img src="./src/assets/icons/wave.svg" alt="" /></div>
              <div class="transcription__body">
                <div class="transcription__time">Now</div>
                <div class="transcription__content">
                  Thank you everyone for joining the design critique meeting. I want everyoneâ€™s opinion so please start
                  !
                </div>
              </div>
            </div>
          </div>
          <div class="chat">
            <div class="chat__overlay"></div>
            <div class="chat__wrap">
              <ul class="chat-tabs">
                <li class="chat-tabs__item chat-tabs__item--active"><button>Messages (4)</button></li>
                <li class="chat-tabs__item"><button>Participants</button></li>
              </ul>

              <div class="chat__content">
                <div class="message-list">
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Jack</div>
                        <div class="message__content">
                          <div class="message__text">
                            Anyone is up for illustrations. I think there are less relatable images according to our
                            brand.
                          </div>
                          <div class="message__date">12:02 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Coasy</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item message-list__item--iam">
                    <div class="message message--iam">
                      <div class="message__mark-as-read"><img src="./src/assets/icons/read.svg" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">You</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Jack</div>
                        <div class="message__content">
                          <div class="message__text">
                            Anyone is up for illustrations. I think there are less relatable images according to our
                            brand.
                          </div>
                          <div class="message__date">12:02 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Coasy</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item message-list__item--iam">
                    <div class="message message--iam">
                      <div class="message__mark-as-read"><img src="./src/assets/icons/read.svg" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">You</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Jack</div>
                        <div class="message__content">
                          <div class="message__text">
                            Anyone is up for illustrations. I think there are less relatable images according to our
                            brand.
                          </div>
                          <div class="message__date">12:02 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Coasy</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item message-list__item--iam">
                    <div class="message message--iam">
                      <div class="message__mark-as-read"><img src="./src/assets/icons/read.svg" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">You</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Jack</div>
                        <div class="message__content">
                          <div class="message__text">
                            Anyone is up for illustrations. I think there are less relatable images according to our
                            brand.
                          </div>
                          <div class="message__date">12:02 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Coasy</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item message-list__item--iam">
                    <div class="message message--iam">
                      <div class="message__mark-as-read"><img src="./src/assets/icons/read.svg" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">You</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Jack</div>
                        <div class="message__content">
                          <div class="message__text">
                            Anyone is up for illustrations. I think there are less relatable images according to our
                            brand.
                          </div>
                          <div class="message__date">12:02 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Coasy</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item message-list__item--iam">
                    <div class="message message--iam">
                      <div class="message__mark-as-read"><img src="./src/assets/icons/read.svg" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">You</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Jack</div>
                        <div class="message__content">
                          <div class="message__text">
                            Anyone is up for illustrations. I think there are less relatable images according to our
                            brand.
                          </div>
                          <div class="message__date">12:02 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item">
                    <div class="message">
                      <div class="message__user-pic"><img src="./src/assets/user_temp.png" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">Coasy</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="message-list__item message-list__item--iam">
                    <div class="message message--iam">
                      <div class="message__mark-as-read"><img src="./src/assets/icons/read.svg" alt="" /></div>
                      <div class="message__body">
                        <div class="message__user-name">You</div>
                        <div class="message__content">
                          <div class="message__text">Hello Guys! Whats your opinion?</div>
                          <div class="message__date">12:22 pm</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="chat__footer">
                <div class="chat-noty-typing">
                  <div class="chat-noty-typing__indicator">
                    <img src="src/assets/load.svg" alt="" />
                  </div>
                  <div class="chat-noty-typing__text">John is typing..</div>
                </div>
                <div class="chat-input">
                  <input class="chat-input__input" placeholder="Write message here" />
                  <button class="chat-input__file"><img src="./src/assets/icons/pic.svg" alt="" /></button>
                  <div class="chat-input__divider"></div>
                  <button class="chat-input__send"><img src="./src/assets/icons/arrow-right.svg" alt="" /></button>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
    <script>
      const cameraVideoStream = document.getElementById("camera-stream");

      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia({ video: true })) {
        navigator.mediaDevices.getUserMedia({ video: true }).then((stream) => {
          cameraVideoStream.srcObject = stream;
          cameraVideoStream.play();
        });
        ["temp", "temp1"].forEach((id) => {
          navigator.mediaDevices.getUserMedia({ video: true }).then((stream) => {
            const dom = document.getElementById(id);
            dom.srcObject = stream;
            dom.play();
          });
        });
      }

      function chatTabs() {
        const tabRoot = document.querySelectorAll(".chat-tabs__item");

        console.log(tabRoot);

        //chat-tabs__item
        tabRoot.forEach((dom) => {
          dom.addEventListener("click", function (e) {
            console.log(e, e.target, this);
            const oldSelectedTab = document.querySelector(".chat-tabs__item--active");
            if (oldSelectedTab) {
              oldSelectedTab.classList.remove("chat-tabs__item--active");
            }
            this.classList.add("chat-tabs__item--active");
          });
        });
      }

      function app() {
        chatTabs();

        document.querySelector("#share-screen").addEventListener("click", (e) => {
          const displayMediaOptions = {
            video: {
              displaySurface: "browser",
            },
            audio: {
              suppressLocalAudioPlayback: false,
            },
            preferCurrentTab: false,
            selfBrowserSurface: "exclude",
            systemAudio: "include",
            surfaceSwitching: "include",
            monitorTypeSurfaces: "include",
          };
          async function startCapture() {
            let captureStream = null;

            try {
              captureStream = await navigator.mediaDevices.getDisplayMedia(displayMediaOptions);
            } catch (err) {
              console.error(`Error: ${err}`);
            }
            return captureStream;
          }
          startCapture();
        });
      }

      ["#camera-toggle", "#mic-toggle"].forEach((el) => {
        document.querySelector(el).addEventListener("click", (e) => {
          e.target.classList.toggle("player-control__button--toggle");
        });
      });
      app();
    </script>
    <!--    <script type="module" src="/src/main.tsx"></script>-->
  </body>
</html>
